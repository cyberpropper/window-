# window++

Небольшое Node.js/Express‑приложение: отдаёт SPA из `public/` и защищает её простейшей авторизацией по админскому логину/паролю через JWT‑куку.

## Быстрый старт
- Требуется Node.js 18+ и npm.
- Установить зависимости: `npm install`.
- Создать `.env` (см. ниже), затем запустить: `npm start`.
- Приложение поднимется на `http://localhost:4000` (порт можно сменить переменной `PORT`).

## Переменные окружения
Создайте файл `.env` в корне со значениями:
```
ADMIN_LOGIN=admin
ADMIN_PASS_HASH=$2b$10$... # bcrypt‑хеш пароля
JWT_SECRET=change_me
PORT=4000
NODE_ENV=development
```
- Хеш пароля можно получить командой:  
  `node -e "console.log(require('bcryptjs').hashSync('MY_PASSWORD', 10))"`
- `JWT_SECRET` лучше заменить на собственную случайную строку.

## Как работает авторизация
- `POST /api/login` — принимает `{ login, pass }`. При успехе кладёт httpOnly‑куку `sid` (JWT) на 8 часов и возвращает `{ ok: true }`.
- `GET /api/status` — проверяет куку, валидирует JWT и текущую сессию, отвечает `{ ok: true, user }`.
- В памяти держится только один активный `sessionId`: новый логин обнуляет предыдущую сессию.

## Структура
- `server.js` — сервер, статика и API авторизации.
- `public/` — фронтенд (SPA‑калькулятор).
- `.env` — ваши секреты и настройки.

## Скрипты npm
- `npm start` — запускает сервер (`node server.js`).
